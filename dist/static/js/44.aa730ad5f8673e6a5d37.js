webpackJsonp([44],{OXaI:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("woOf"),n=i.n(l),o=i("vMJZ"),s=i("mvHQ"),a=i.n(s),r={props:["editrole"],data:function(){return{}},watch:{editrole:function(e){this.value=this.editrole,console.log("AddroleFrom赋值："+a()(this.editrole))}},methods:{}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",attrs:{model:e.editrole,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称"}},[i("el-input",{model:{value:e.editrole.name,callback:function(t){e.$set(e.editrole,"name",t)},expression:"editrole.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.editrole.description,callback:function(t){e.$set(e.editrole,"description",t)},expression:"editrole.description"}})],1),e._v(" "),e.editrole.id>0?i("el-form-item",{attrs:{label:"状态"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.editrole.status,callback:function(t){e.$set(e.editrole,"status",t)},expression:"editrole.status"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"排序"}},[i("el-input",{model:{value:e.editrole.desc,callback:function(t){e.$set(e.editrole,"desc",t)},expression:"editrole.desc"}})],1)],1)],1)},staticRenderFns:[]},c={props:["roleid"],watch:{roleid:function(e){this.roleid=e,this.getroleper(this.roleid)}},data:function(){return{listLoading:!1,list:[],sellectdata:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(o.g)().then(function(t){e.listLoading=!1,e.list=t.data,e.getroleper(e.roleid)})},gettypestr:function(e){return this.typedic[e]},handleChange:function(){},getroleper:function(e){var t=this;this.listLoading=!0,Object(o.l)(e).then(function(e){t.listLoading=!1;var i=e.data;t.sellectdata=[],i.forEach(function(e){t.getPathById(e.id,t.list,function(e){t.sellectdata.push(e)})}),console.log(a()(t.sellectdata))})},getPathById:function(e,t,i){var l=[];try{t.forEach(function(t){!function t(i){if(l.push(i.id),i.id==e)throw"GOT IT!";if(i.children&&i.children.length>0){for(var n=0;n<i.children.length;n++)t(i.children[n]);l.pop()}else l.pop()}(t)})}catch(e){i(l)}}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}]},[i("el-cascader-panel",{attrs:{options:e.list,props:{checkStrictly:!0,value:"id",label:"name",multiple:!0},size:"10%"},on:{change:e.handleChange},model:{value:e.sellectdata,callback:function(t){e.sellectdata=t},expression:"sellectdata"}})],1)},staticRenderFns:[]},f={components:{AddroleFrom:i("VU/8")(r,d,!1,null,null,null).exports,Adminaddpermission:i("VU/8")(c,u,!1,null,null,null).exports},data:function(){return{list:[],editrole:{},listLoading:!1,dialogVisible:!1,editPermissonVisible:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(o.k)().then(function(t){e.listLoading=!1,e.list=t.data})},addroledialog:function(){this.editrole={},this.dialogVisible=!0},roledelete:function(e){var t=this;Object(o.j)(e.id).then(function(e){t.getList()})},onSubmit:function(){var e=this,t=this.$refs.AddroleFrom.editrole;""!=t.name?null!=t.id&&0!=t.id?(this.rolechange(t),this.dialogVisible=!1):Object(o.i)(n()({},t)).then(function(t){e.dialogVisible=!1,e.getList()}):this.$message("角色名不能为空")},rolechange:function(e){var t=this;Object(o.n)(e.id,n()({},e)).then(function(e){t.$message("修改成功"),t.getList()})},roleedit:function(e){this.editrole=e,this.dialogVisible=!0},permissionedit:function(e){this.editrole=e,this.editPermissonVisible=!0},rolepermissionupdate:function(){var e=this,t=new FormData,i=this.$refs.RoleaddPer.roleid,l=[];this.$refs.RoleaddPer.sellectdata.forEach(function(e){l.push(e[e.length-1])});var n=l.join(",");t.append("roleId",""+i),t.append("permissionIds",n),Object(o.m)(t).then(function(t){e.editPermissonVisible=!1})}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.addroledialog}})],1),e._v(" "),i("div",{staticClass:"table-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"productTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[i("el-table-column",{attrs:{label:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.id))])]}}])},[e._v('\n        label="id"\n        align="center">\n        ')]),e._v(" "),i("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"adminCount",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.adminCount))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(i){return e.rolechange(t.row)}},model:{value:t.row.status,callback:function(i){e.$set(t.row,"status",i)},expression:"scope.row.status"}})],1)]}}])},[e._v('\n        label="status"\n        align="center">\n        ')]),e._v(" "),i("el-table-column",{attrs:{label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.sort))])]}}])},[e._v('\n        label="status"\n        align="center">\n        ')]),e._v(" "),i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.createTime))])]),e._v(" "),i("el-form-item",[i("el-button-group",[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.roleedit(t.row)}}},[e._v("修改")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-orange",size:"mini"},on:{click:function(i){return e.permissionedit(t.row)}}},[e._v("权限管理")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(i){return e.roledelete(t.row)}}},[e._v("删除")])],1)],1)],1)]}}])})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"新增角色",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("AddroleFrom",{ref:"AddroleFrom",attrs:{editrole:e.editrole}}),e._v(" "),i("el-button-group",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"批量修改角色",visible:e.editPermissonVisible,width:"80%"},on:{"update:visible":function(t){e.editPermissonVisible=t}}},[i("Adminaddpermission",{ref:"RoleaddPer",attrs:{roleid:e.editrole.id}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editPermissonVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.rolepermissionupdate}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},m=i("VU/8")(f,p,!1,null,null,null);t.default=m.exports}});
//# sourceMappingURL=44.aa730ad5f8673e6a5d37.js.map